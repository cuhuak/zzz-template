<!-- useWith: use ${name} instead of ${data.name} -->
<script type="module">
  import { ZzzTemplate, useLayout } from '/zzz-template/index.js'

  // wraps template in with(data){...} so you can use ${name} instead of ${data.name}
  function useWith(zzz) {
    zzz.s.unshift('with(data){')
    zzz.e.push('return content}')
  }

  const zzz = new ZzzTemplate()
  useLayout(zzz)
  useWith(zzz) // MUST BE LAST

  const result = zzz.render('page', { title: 'My Page', name: 'Jerry' })

  document.body.innerHTML = result
</script>

<script id="page" type="plain/text">
  ${LAYOUT('layout', {title})}
  <p>Hello ${name}!</p>
</script>

<script id="layout" type="plain/text">
  <h1>${title}</h1>
  ${content}
</script>
